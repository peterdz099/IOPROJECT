<Check@MDCheckbox>:
    group: 'group'
    size_hint: None, None
    size: dp(35), dp(35)

<check_sort@MDCheckbox>:
    group: 'group2'
    size_hint: None, None
    size: dp(35), dp(35)

<check_file_mode@MDCheckbox>:
    group: 'group3'
    size_hint: None, None
    size: dp(35), dp(35)

<check_file_sort@MDCheckbox>:
    group: 'group4'
    size_hint: None, None
    size: dp(35), dp(35)

<MainWindow>:
    name: "main"
    FloatLayout:
        orientation: 'vertical'

    MDBottomNavigation:
        id: nav

        MDBottomNavigationItem:

            name: 'screen 1'
            text: "Search"
            icon: 'magnify'

            MDFloatLayout:
                md_bg_color: 1,1,1,1

                ScreenManager:
                    id: screen_manager
                    Screen:
                        name: "screeen1"
                        canvas:
                            Color:
                                rgba: 1, 1, 1, 1
                            Rectangle:
                                size: self.size
                                pos: self.pos
                                   
                        MDLabel:
                            id: message
                            text: "Find your dream toy!"
                            font_size: 14
                            halign: 'center'
                            pos_hint:{"x": 0,"y": 0.3}

                        Image:
                            source: 'resources/big ball.png'
                            size_hint: 1,1
                            pos_hint:{"x": -0.3,"y":-0.05}
                        Image:
                            source: 'resources/big ball.png'
                            size_hint: 1,1
                            pos_hint:{"x": 0.4,"y":0.4}
                        Image:
                            source: 'resources/big ball.png'
                            size_hint: 1,1
                            pos_hint:{"x": 0.4,"y": -0.4}

                        Check:
                            active: True
                            pos_hint: {'center_x': .8, 'center_y': .52}

                        MDLabel:
                            text: "Every store"
                            font_size: 16
                            halign: 'left'
                            pos_hint:{"x": 0.18,'center_y': .52}

                        Check:
                            pos_hint: {'center_x': .8, 'center_y': .47}
                            on_active: root.change_mode(1)

                        MDLabel:
                            text: "Only Allegro"
                            font_size: 16
                            halign: 'left'
                            pos_hint:{"x": 0.18,'center_y': .47}

                        Check:
                            pos_hint: {'center_x': .8, 'center_y': .42}
                            on_active: root.change_mode(2)
                        MDLabel:
                            text: "Every store except Allegro"
                            font_size: 16
                            halign: 'left'
                            pos_hint:{"x": 0.18,'center_y': .42}

                        check_sort:
                            active: True
                            pos_hint: {'center_x': .8, 'center_y': .32}
                            on_active: root.change_sort_mode(False)

                        MDLabel:
                            text: "Sort by price"
                            font_size: 16
                            halign: 'left'
                            pos_hint:{"x": 0.18,'center_y': .32}

                        check_sort:
                            pos_hint: {'center_x': .8, 'center_y': .27}
                            on_active: root.change_sort_mode(True)

                        MDLabel:
                            text: "Sort by shop number"
                            font_size: 16
                            halign: 'left'
                            pos_hint:{"x": 0.18,'center_y': .27}

                        MDTextField:
                            id: find
                            halign: "center"
                            valign: "center"
                            mode: "rectangle"
                            bg_color: 0,0,0,1
                            multiline: False
                            size_hint: 0.7, 0.12
                            pos_hint:{"x": 0.15,"y": 0.6}

                        MDFillRoundFlatButton:
                            text: "Search"
                            font_size: 16
                            size_hint: 0.6, 0.10
                            pos_hint:{"x":0.2,"y":0.10}
                            md_bg_color: "#2c4591"
                            on_release:
                                root.search()
                                root.clear_search()
                                screen_manager.transition.direction = "down"

                    Screen:
                        id: s2
                        name: "screeen2"

                        MDTextField:
                            id: set
                            multiline : False
                            halign: "center"
                            valign: "center"
                            mode: "rectangle"
                            bg_color: 0,0,0,1
                            multiline: False
                            size_hint: 0.7, 0.12
                            pos_hint:{"x": 0.15,"y": 0.85}

                        MDCard:
                            md_bg_color: 1,1,1,1
                            orientation: "vertical"
                            padding: "8dp"
                            size_hint: 0.8, 0.8
                            pos_hint: {"center_x": 0.5, "center_y": 0.43}

                            ScrollView:
                                MDList:
                                    id: scroll

                        MDIconButton:
                            icon: "arrow-down-thick"
                            theme_icon_color: "Custom"
                            icon_color: 1,1,1,1
                            icon_size: "40sp"
                            pos_hint:{"x":0.80,"y":0.04}
                            md_bg_color: "#2c4591"
                            on_release:
                                root.clear_findings()
                                screen_manager.transition.direction = "up"

                    Screen:
                        name: "screeen3"
                        canvas:
                            Color:
                                rgba: 1, 1, 1, 1
                            Rectangle:
                                size: self.size
                                pos: self.pos

                        FloatLayout:
                            MDCard:

                                size_hint: 0.7, 0.2
                                pos_hint: {"center_x": 0.5, "center_y": 0.8}

                                AsyncImage:
                                    id: imga
                                    allow_stretch: True


                            MDTextField:
                                id: details

                                text_color: 0,0,0,1
                                font_size: 12
                                mode: "rectangle"
                                halign: "center"
                                valign: 'middle'
                                multiline: True
                                size_hint: 0.7, 0.45
                                pos_hint:{"center_x": 0.5, "center_y": 0.45}

                            MDFillRoundFlatButton:
                                text: "Go to website"
                                text_color: 1,1,1,1
                                md_bg_color: "#2c4591"
                                #background_normal
                                size_hint: 0.3, 0.1
                                pos_hint:{"center_x": 0.33, "center_y": 0.15}
                                on_release: root.go_to_web()

                            MDFillRoundFlatButton:
                                text: "Add to Cart"
                                text_color: 1,1,1,1
                                md_bg_color: "#2c4591"
                                size_hint: 0.3, 0.1
                                pos_hint: {"center_x": 0.67, "center_y": 0.15}
                                on_release: root.add_to_basket()

                            Button:
                                text: "Back to findings"
                                underline: True
                                font_size: 13
                                size_hint: 0.6, 0.10
                                pos_hint:{"center_x": 0.5,"center_y": 0.06}
                                background_color: (133/255,225/255,189/255,0)
                                color: (92/255, 94/255, 94/255,1)
                                on_release:
                                    screen_manager.current = "screeen2"
                                    screen_manager.transition.direction = "up"



        MDBottomNavigationItem:
            name: 'screen 2'
            text: "File"
            icon: 'file'

            MDFloatLayout:
                ScreenManager:
                    id: screen_manager_2
                    Screen:
                        name: "s1"
                        canvas:
                            Color:
                                rgba: 1, 1, 1, 1
                            Rectangle:
                                size: self.size
                                pos: self.pos

                        MDLabel:
                            text: "Import .csv file with shopping list!"
                            font_size: 14
                            halign: 'center'
                            pos_hint:{"x": 0,"y": 0.2}

                        Image:
                            source: 'resources/big ball.png'
                            size_hint: 1,1
                            pos_hint:{"x": -0.3,"y":-0.05}
                        Image:
                            source: 'resources/big ball.png'
                            size_hint: 1,1
                            pos_hint:{"x": 0.4,"y":0.4}
                        Image:
                            source: 'resources/big ball.png'
                            size_hint: 1,1
                            pos_hint:{"x": 0.4,"y": -0.4}

                        check_file_mode:
                            active: True
                            pos_hint: {'center_x': .8, 'center_y': .57}

                        MDLabel:
                            text: "Every store"
                            font_size: 16
                            halign: 'left'
                            pos_hint:{"x": 0.18,'center_y': .57}

                        check_file_mode:
                            pos_hint: {'center_x': .8, 'center_y': .52}
                            on_active: root.change_file_mode(1)

                        MDLabel:
                            text: "Only Allegro"
                            font_size: 16
                            halign: 'left'
                            pos_hint:{"x": 0.18,'center_y': .52}

                        check_file_mode:
                            pos_hint: {'center_x': .8, 'center_y': .47}
                            on_active: root.change_file_mode(2)
                        MDLabel:
                            text: "Every store except Allegro"
                            font_size: 16
                            halign: 'left'
                            pos_hint:{"x": 0.18,'center_y': .47}

                        check_file_sort:
                            active: True
                            pos_hint: {'center_x': .8, 'center_y': .37}
                            on_active: root.change_file_sort_mode(False)

                        MDLabel:
                            text: "Sort by price"
                            font_size: 16
                            halign: 'left'
                            pos_hint:{"x": 0.18,'center_y': .37}

                        check_file_sort:
                            pos_hint: {'center_x': .8, 'center_y': .32}
                            on_active: root.change_file_sort_mode(True)

                        MDLabel:
                            text: "Sort by shop number"
                            font_size: 16
                            halign: 'left'
                            pos_hint:{"x": 0.18,'center_y': .32}

                        MDFillRoundFlatButton:
                            text: "Import file"
                            font_size: 16
                            size_hint: 0.6, 0.10
                            pos_hint:{"x":0.2,"y": 0.1}
                            md_bg_color: "#2c4591"
                            on_release:
                                root.search_from_file()
                                screen_manager_2.transition.direction = "down"

                    Screen:
                        name: "s2"

                        MDTextField:
                            text: "Findings from List"
                            multiline : False
                            halign: "center"
                            valign: "center"
                            mode: "rectangle"
                            bg_color: 0,0,0,1
                            multiline: False
                            size_hint: 0.7, 0.12
                            pos_hint:{"x": 0.15,"y": 0.85}

                        MDCard:
                            md_bg_color: 1,1,1,1
                            orientation: "vertical"
                            padding: "8dp"
                            size_hint: 0.8, 0.8
                            pos_hint: {"center_x": 0.5, "center_y": 0.43}

                            ScrollView:
                                MDList:
                                    id: scroll2

                        MDIconButton:
                            icon: "arrow-down-thick"
                            icon_color: (1,1,1,1)
                            icon_size: "35sp"
                            md_bg_color: "#2c4591"
                            pos_hint:{"x":0.80,"y":0.04}
                            on_release:
                                root.clear_file_findings()
                                screen_manager_2.transition.direction = "up"

                    Screen:
                        name: "s3"
                        FloatLayout:
                            MDCard:

                                size_hint: 0.7, 0.2
                                pos_hint: {"center_x": 0.5, "center_y": 0.8}

                                AsyncImage:
                                    id: img
                                    allow_stretch: True

                            MDTextField:
                                id: details2

                                text_color: 0,0,0,1
                                font_size: 12
                                mode: "rectangle"
                                halign: "center"
                                valign: 'middle'
                                multiline: True
                                size_hint: 0.7, 0.45
                                pos_hint:{"center_x": 0.5, "center_y": 0.45}

                            MDFillRoundFlatButton:
                                text: "Go to website"
                                text_color: 1,1,1,1
                                md_bg_color: "#2c4591"
                                #background_normal
                                size_hint: 0.3, 0.1
                                pos_hint:{"center_x": 0.33, "center_y": 0.15}
                                on_release: root.go_to_web2()

                            MDFillRoundFlatButton:
                                text: "Add to Cart"
                                text_color: 1,1,1,1
                                md_bg_color: "#2c4591"
                                size_hint: 0.3, 0.1
                                pos_hint: {"center_x": 0.67, "center_y": 0.15}
                                on_release: root.add_to_basket_from_file()

                            Button:
                                text: "Back to findings"
                                underline: True
                                font_size: 13
                                size_hint: 0.6, 0.10
                                pos_hint:{"center_x": 0.5,"center_y": 0.06}
                                background_color: (133/255,225/255,189/255,0)
                                color: (92/255, 94/255, 94/255,1)
                                on_release:
                                    screen_manager_2.current = "s2"
                                    screen_manager_2.transition.direction = "up"


        MDBottomNavigationItem:
            name: 'screen 3'
            text: "Cart"
            icon: 'cart'

            MDTextField:
                text: "Your Cart"
                disabled: True
                multiline : False
                halign: "center"
                valign: "center"
                mode: "rectangle"
                bg_color: 0,0,0,1
                multiline: False
                size_hint: 0.7, 0.12
                pos_hint:{"x": 0.15,"y": 0.85}

            MDCard:
                md_bg_color: 1,1,1,1
                orientation: "vertical"
                padding: "8dp"
                size_hint: 0.8, 0.7
                pos_hint: {"center_x": 0.5, "center_y": 0.48}

                ScrollView:
                    MDList:
                        id: scroll_cart

            MDFillRoundFlatButton:
                text: "Import to file"
                text_color: 1,1,1,1
                md_bg_color: "#2c4591"
                size_hint: 0.3, 0.08
                pos_hint:{"center_x": 0.33, "center_y": 0.08}
                on_release: root.go_to_web()

            MDFillRoundFlatButton:
                text: "Clear Basket"
                text_color: 1,1,1,1
                md_bg_color: "#2c4591"
                size_hint: 0.3, 0.08
                pos_hint:{"center_x": 0.67, "center_y": 0.08}
                on_release: root.delete_user_cart()

        MDBottomNavigationItem:
            name: 'screen 4'
            text: "History"  
            icon: 'history'


            MDTextField:
                text: "Browse History"
                disabled: True
                multiline : False
                halign: "center"
                valign: "center"
                mode: "rectangle"
                bg_color: 0,0,0,1
                multiline: False
                size_hint: 0.7, 0.12
                pos_hint:{"x": 0.15,"y": 0.85}

            MDCard:
                md_bg_color: 1,1,1,1
                orientation: "vertical"
                padding: "8dp"
                size_hint: 0.8, 0.8
                pos_hint: {"center_x": 0.5, "center_y": 0.43}

                ScrollView:
                    MDList:
                        id: scroll_history


        MDBottomNavigationItem:
            name: 'screen 5'
            text: "Profile"
            icon: 'account-box'


            MDFloatLayout:
                md_bg_color: 1,1,1,1
                MDLabel:
                    id: username

                    font_size: 14
                    halign: 'center'
                    pos_hint:{"x": 0,"y": -0.1}

                Image:
                    source: 'resources/big ball.png'
                    size_hint: 1,1
                    pos_hint:{"x": -0.4,"y":-0.05}
                Image:
                    source: 'resources/big ball.png'
                    size_hint: 1,1
                    pos_hint:{"x": 0.4,"y":0.4}
                Image:
                    source: 'resources/big ball.png'
                    size_hint: 1,1
                    pos_hint:{"x": 0.4,"y": -0.4}

                Image:
                    source: 'resources/user.png'
                    size_hint: 0.8, 0.8
                    pos_hint:{"x": 0.115,"y": 0.3}

                MDFillRoundFlatButton:
                    text: "Log out"
                    font_size: 16
                    size_hint: 0.6, 0.10
                    pos_hint:{"x":0.2,"y": 0.2}
                    md_bg_color: "#2c4591"
                    on_release:
                        root.back_to_login()
                        root.manager.transition.direction = "left"






